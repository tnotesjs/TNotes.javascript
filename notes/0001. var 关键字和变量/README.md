# [0001. var 关键字和变量](https://github.com/Tdahuyou/TNotes.javascript/tree/main/notes/0001.%20var%20%E5%85%B3%E9%94%AE%E5%AD%97%E5%92%8C%E5%8F%98%E9%87%8F)

<!-- region:toc -->

- [📂 TNotes.yuque](https://www.yuque.com/tdahuyou/tnotes.yuque/)
  - [TNotes.yuque.javascript.0001](https://www.yuque.com/tdahuyou/tnotes.yuque/html-css-js.0001)
- [1. 🎯 本节内容](#1--本节内容)
- [2. 🫧 评价](#2--评价)
- [3. 💡 思维导图](#3--思维导图)
- [4. 📒 理解变量、内存、值](#4--理解变量内存值)
- [5. 💻 demos.11 - `var` 关键字的作用域特性](#5--demos11---var-关键字的作用域特性)
- [6. 📒 不再推荐使用 `var` 来声明变量](#6--不再推荐使用-var-来声明变量)
- [7. 💻 demos.1 - 理解变量和值](#7--demos1---理解变量和值)
- [8. 💻 demos.2 - 区分大小写](#8--demos2---区分大小写)
- [9. 💻 demos.3 - 变量的声明、赋值](#9--demos3---变量的声明赋值)
- [10. 💻 demos.4 - 仅声明未赋值为 undefined](#10--demos4---仅声明未赋值为-undefined)
- [11. 💻 demos.5 - 全局变量](#11--demos5---全局变量)
- [12. 💻 demos.6 - 使用未声明的变量会报错](#12--demos6---使用未声明的变量会报错)
- [13. 💻 demos.7 - 可一次声明多个变量](#13--demos7---可一次声明多个变量)
- [14. 💻 demos.8 - 理解“动态”类型](#14--demos8---理解动态类型)
- [15. 💻 demos.9 - 变量重复声明无效](#15--demos9---变量重复声明无效)
- [16. 💻 demos.10 - 变量重复声明并重新赋值](#16--demos10---变量重复声明并重新赋值)

<!-- endregion:toc -->

## 1. 🎯 本节内容

- 理解变量、内存、值是什么
- 了解 var 关键字的基本使用
- 知道 var 关键字已被淘汰，不再推荐使用

## 2. 🫧 评价

- 本节主要介绍“变量”相关的基础知识点，比如内存、变量、值的概念，以及 var 关键字的使用。
- 内存、变量、值，这些概念是基础的通识，在学习其他编程语言时也一样会接触到。
- “思维导图”部分对本节的核心内容做了汇总，可以全屏放大后搂一眼，了解笔记的大致内容。
- 🤔 如何看到 var？
  - 虽然说 var 关键字已经退出历史舞台了，但是在一些开源项目中，还是会看到 var 的身影，所以还是 **有必要了解 var 关键字的一些基本特性**，目的是为了能读懂别人用到 var 的程序。
  - 可能会看到 var 的场景：
    - 项目年代比较久远；
    - 项目中的核心语言并非 js，只需要用 js 实现很简单的脚本逻辑即可；
- 文中还提到了 let、const 关键字，有关它们的介绍请见后续笔记内容。

## 3. 💡 思维导图

```markmap

- 变量
  - 核心概念
    - 变量的本质
      - 变量可以看作是内存空间的引用，它代表了一个存储在内存中的数据值。
      - 每个变量都关联一个特定的内存位置，这个位置存储了变量的值。
      - 任何可以书写数值的地方，都可以书写变量。
    - 定义变量的本质
      - 定义变量实际上是告诉计算机在内存中为该变量分配一定的空间。
    - 给变量赋值的本质
      - 赋值操作是将某个数据值存储在变量关联的内存空间中。之后，每当我们引用这个变量，计算机就会到内存空间中读取其中的值。
  - 自动回收 ♻️
    - 若一个空间没有变量指向它，那么这块空间将被 JS 视作垃圾，会被自动回收。
  - 语法糖
    - 变量可以在声明的时候同时完成赋值操作（语法糖）。
    - 本质上是两步操作 —— 声明 + 赋值
  - 定义变量
    - var
      - 使用 var 关键字声明的变量的值是可变的，变量可以被重新赋值，新的值会覆盖原来的值。
      - 还有很多细节……（不过不太重要，现阶段来看它已经 out 了，推荐使用 let、const 来声明变量。）
      - var 不推荐
    - let
      - 有块级作用域
      - 有暂时性死区
      - 声明的变量可以被重新赋值
      - let 推荐
    - const
      - 有块级作用域
      - 有暂时性死区
      - 声明的变量可以被赋值，但一旦赋值后不可更改，可以作为“常量”。
      - const 推荐
  - 访问不存在的变量
    - 若使用一个未声明（不存在）的变量，会导致错误。
    - 特殊情况：使用 typeof 检测变量的数据类型时，可以是未声明的变量，得到的结果是 "undefined"。
  - 声明提升
    - 变量和函数的声明在代码执行前会被移动到它们所在作用域的顶部。
    - 这种提升不会超越脚本块的顶端。

```

## 4. 📒 理解变量、内存、值

- 在编程中，变量（门牌号）指向内存中的特定位置（房间），这个位置中存储的内容（房间里的东西）就是值。

```markmap

- 变量、内存、值
  - 内存 👉🏻 酒店
    - **内存**：就像一栋酒店，有很多房间（存储空间）供客人使用。
      - ![img](https://cdn.jsdelivr.net/gh/tnotesjs/imgs@main/2024-10-25-07-25-01.png)
  - 变量 👉🏻 门牌
    - **变量**：就像房间的门牌号，用来标识和找到特定的房间。
      - ![img](https://cdn.jsdelivr.net/gh/tnotesjs/imgs@main/2024-10-25-07-25-08.png)
  - 值 👉🏻 房间里的东西
    - **值**：就像房间里的东西，可以是家具、家电等，是实际存储在房间（内存）里的内容。
      - ![img](https://cdn.jsdelivr.net/gh/tnotesjs/imgs@main/2024-10-25-07-25-18.png)

```

## 5. 💻 demos.11 - `var` 关键字的作用域特性

- **函数作用域**：当 `var` 在函数内部声明时，它的作用域仅限于该函数内。这意味着只能在声明它的函数内部访问该变量。
- **全局作用域**：如果 `var` 在任何函数外部声明，则它具有全局作用域，可以在代码的任何地方访问该变量，甚至在浏览器环境中会成为 `window` 对象的属性。
- **提前初始化（Hoisting）**：`var` 声明会被提升到其作用域的顶部，但赋值不会被提升。因此，在声明之前访问变量会导致其值为 `undefined` 而不是报错。
- **可重复声明**：在同一作用域中可以多次使用 `var` 声明同名变量，后面的声明不会报错，但也不会覆盖之前的声明。

::: code-group

<<< ./demos/11/1.js {3,5}

:::

- 在这个例子中，`x` 的值在函数范围内始终可见，并且在 `if` 块中再次声明 `x` 不会创建新的变量，而是修改同一个变量。

## 6. 📒 不再推荐使用 `var` 来声明变量

- 对 var 关键字有个简单的了解即可，**var 基本算是退出历史舞台了**。
- ES6 推出了两个新的用于定义变量的关键字 let、const，它们解决了 var 关键字在定义变量时的诸多“问题”。
  - 为了方便相关知识点的介绍，后续部分文档中依旧会使用 var 来声明变量。
  - 但是，**在实际工作中，不推荐使用 var 来声明变量，应该使用 let、const。**
- 到底什么时候使用 let、什么时候使用 const，这些在后面的内容中都会介绍到。这里可以简单提一嘴：
  - **`let` 用来声明“变”量 - 也就是那些可能会被重新赋值的变量**
  - **`const` 用来声明“常”量 - 就是那些在初始化好之后，咱们不会再去改变它的值的变量**

## 7. 💻 demos.1 - 理解变量和值

::: code-group

<<< ./demos/1/1.js {}

:::

## 8. 💻 demos.2 - 区分大小写

::: code-group

<<< ./demos/2/1.js {}

:::

## 9. 💻 demos.3 - 变量的声明、赋值

::: code-group

<<< ./demos/3/1.js {}

:::

## 10. 💻 demos.4 - 仅声明未赋值为 undefined

::: code-group

<<< ./demos/4/1.js {}

:::

## 11. 💻 demos.5 - 全局变量

::: code-group

<<< ./demos/5/1.js {}

:::

## 12. 💻 demos.6 - 使用未声明的变量会报错

::: code-group

<<< ./demos/6/1.js {}

:::

## 13. 💻 demos.7 - 可一次声明多个变量

::: code-group

<<< ./demos/7/1.js {}

:::

## 14. 💻 demos.8 - 理解“动态”类型

::: code-group

<<< ./demos/8/1.js {}

:::

## 15. 💻 demos.9 - 变量重复声明无效

::: code-group

<<< ./demos/9/1.js {}

:::

## 16. 💻 demos.10 - 变量重复声明并重新赋值

::: code-group

<<< ./demos/10/1.js {}

:::
