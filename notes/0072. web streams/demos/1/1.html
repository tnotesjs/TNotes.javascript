<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script type="module">
      // 创建一个生成 1-10 数字的流
      const numberStream = new ReadableStream({
        start(controller) {
          for (let i = 1; i <= 10; i++) {
            controller.enqueue(i)
          }
          controller.close()
        },
      })

      // 读取数字流
      const reader = numberStream.getReader()
      while (true) {
        const { done, value } = await reader.read()
        if (done) break
        console.log(value)
      }
      // 输出：
      // 1
      // 2
      // 3
      // 4
      // 5
      // 6
      // 7
      // 8
      // 9
      // 10
    </script>
  </body>
</html>
