<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <title>èµ„æºæ¸…ç†æ¼”ç¤º</title>
    <style>
      body {
        font-family: system-ui;
        max-width: 1000px;
        margin: 40px auto;
        padding: 0 20px;
      }
      button {
        padding: 10px 20px;
        margin: 5px;
        cursor: pointer;
      }
      .resource-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 15px;
        margin: 20px 0;
      }
      .resource-card {
        border: 1px solid #ddd;
        padding: 15px;
        border-radius: 8px;
        background: #f9f9f9;
      }
      .resource-card.active {
        border-color: #2ecc71;
        background: #e8f8f5;
      }
      .resource-card.cleaning {
        border-color: #f39c12;
        background: #fef5e7;
      }
      .resource-card.cleaned {
        border-color: #95a5a6;
        background: #ecf0f1;
      }
      .resource-status {
        font-weight: bold;
        padding: 5px 10px;
        border-radius: 4px;
        display: inline-block;
        margin: 5px 0;
      }
      .resource-status.active {
        background: #2ecc71;
        color: white;
      }
      .resource-status.inactive {
        background: #95a5a6;
        color: white;
      }
      .log {
        background: #2c3e50;
        color: #ecf0f1;
        padding: 15px;
        margin: 15px 0;
        border-radius: 4px;
        font-family: monospace;
        font-size: 12px;
        max-height: 300px;
        overflow-y: auto;
      }
      .log-entry {
        margin: 3px 0;
      }
      .success {
        color: #2ecc71;
      }
      .error {
        color: #e74c3c;
      }
      .warning {
        color: #f39c12;
      }
      .info {
        color: #3498db;
      }
    </style>
  </head>
  <body>
    <h1>èµ„æºæ¸…ç†æ¼”ç¤º</h1>

    <div>
      <button id="startStream">å¯åŠ¨æµï¼ˆå¸¦å¤šç§èµ„æºï¼‰</button>
      <button id="cancelNormal">æ­£å¸¸å–æ¶ˆ</button>
      <button id="cancelError">é”™è¯¯å–æ¶ˆ</button>
      <button id="checkMemory">æ£€æŸ¥å†…å­˜</button>
    </div>

    <div class="resource-grid">
      <div class="resource-card" id="timerCard">
        <h4>â° å®šæ—¶å™¨</h4>
        <div class="resource-status inactive" id="timerStatus">æœªæ¿€æ´»</div>
        <div id="timerInfo">å®šæ—¶å™¨ ID: -</div>
      </div>

      <div class="resource-card" id="listenerCard">
        <h4>ğŸ“¡ äº‹ä»¶ç›‘å¬å™¨</h4>
        <div class="resource-status inactive" id="listenerStatus">æœªæ¿€æ´»</div>
        <div id="listenerInfo">ç›‘å¬å™¨æ•°: 0</div>
      </div>

      <div class="resource-card" id="wsCard">
        <h4>ğŸŒ WebSocket (æ¨¡æ‹Ÿ)</h4>
        <div class="resource-status inactive" id="wsStatus">æœªè¿æ¥</div>
        <div id="wsInfo">è¿æ¥çŠ¶æ€: closed</div>
      </div>

      <div class="resource-card" id="cacheCard">
        <h4>ğŸ’¾ ç¼“å­˜</h4>
        <div class="resource-status inactive" id="cacheStatus">æœªæ¿€æ´»</div>
        <div id="cacheInfo">ç¼“å­˜é¡¹: 0</div>
      </div>

      <div class="resource-card" id="bufferCard">
        <h4>ğŸ“¦ å†…å­˜ç¼“å†²åŒº</h4>
        <div class="resource-status inactive" id="bufferStatus">æœªåˆ†é…</div>
        <div id="bufferInfo">å¤§å°: 0 KB</div>
      </div>

      <div class="resource-card" id="streamCard">
        <h4>ğŸŒŠ æµçŠ¶æ€</h4>
        <div class="resource-status inactive" id="streamStatus">æœªè¿è¡Œ</div>
        <div id="streamInfo">æ•°æ®é¡¹: 0</div>
      </div>
    </div>

    <div class="log" id="log"></div>

    <script src="3.js"></script>
  </body>
</html>
